##
# PHP tasks
#
---
- name: "Add settings per ubuntu release"
  include_vars: "{{ ansible_distribution_release }}.yml"

- name: Adding PHP5.4 PPA Repository
  action: apt_repository repo=ppa:ondrej/php5-oldstable
  register: result
  when: php_v5.4

- name: Install required packages.
  apt: pkg={{ item }} state=present
  with_items: php_apt_packages

- name: Customizing php.ini settings.
  template: src={{ item }}-ini.j2 dest={{ php_conf_path }}/{{ item }}.ini mode=644
  with_items: php_module_ini_files
  notify:
    - restart PHP server
    - enable ansible config

- include: php_debug.yml tags=php,php_debug
